# 🐾 AI 펫 시뮬레이터 상세설계서

> **작성일:** 2026년 1월 27일  
> **기반 문서:** 05_AI_펫_시뮬레이터.md  
> **목적:** 상세 시스템 설계 및 밸런싱

---

## 1. 코어 루프 상세

```
┌─────────────────────────────────────────────┐
│            [ 펫 생성 ]                       │
│     DNA 시드 기반 프로시저럴 생성            │
│                 ↓                           │
├─────────────────────────────────────────────┤
│          [ 일상 루프 ]                       │
│   먹이주기 / 놀아주기 / 목욕 / 재우기        │
│                 ↓                           │
│   스탯 변화 → 성장 → 진화                   │
│                 ↓                           │
├─────────────────────────────────────────────┤
│        [ 상호작용 ]                          │
│   대화 (AI) / 미니게임 / 훈련                │
│                 ↓                           │
│        [ 친밀도 & 스탯 성장 ]                │
│                 ↓                           │
├─────────────────────────────────────────────┤
│           [ 소셜 ]                           │
│   DNA 공유 / 교배 / 자랑 / 랭킹              │
└─────────────────────────────────────────────┘
```

---

## 2. 펫 생성 시스템 상세

### 2.1 DNA 시스템 구조

```
[DNA 코드 구조 (12자리)]
XXXX-YYYY-ZZZZ

XXXX: 종류 + 기본 형태 (4자리)
  - X1: 종류 (0-3: 고양이/강아지/토끼/판타지)
  - X2: 체형 (0-9: 마름~통통)
  - X3: 귀 형태 (0-9)
  - X4: 꼬리 형태 (0-9)

YYYY: 색상 정보 (4자리)
  - Y1-Y2: 메인 색상 (00-FF의 압축)
  - Y3: 패턴 타입 (0-9)
  - Y4: 패턴 색상

ZZZZ: 특성 (4자리)
  - Z1: 눈 형태 (0-9)
  - Z2: 성격 코드 (0-5)
  - Z3-Z4: 고유 특징 시드

[예시]
A3F2-K9B1-X7C4
→ 고양이, 통통, 접힌 귀, 긴 꼬리
→ 회색 계열, 줄무늬 패턴
→ 큰 눈, 활발한 성격
```

### 2.2 프로시저럴 생성 알고리즘

```
[생성 단계]
1. 12자리 시드 생성 (랜덤 or 입력)
2. 시드 파싱 → 개별 파라미터 추출
3. 베이스 모델 선택 (종류)
4. 파츠 조합 (귀, 꼬리, 눈 등)
5. 색상/패턴 적용
6. 성격 부여

[파츠 변형 테이블]
| 파츠 | 변형 수 | 조합 가능 |
|------|--------|----------|
| 귀   | 10종   | 100%     |
| 꼬리 | 10종   | 100%     |
| 눈   | 10종   | 100%     |
| 입   | 5종    | 100%     |
| 무늬 | 20종   | 80%      |
| 악세사리 | 15종 | 30%    |

총 조합: 10×10×10×5×20 = 100,000+ 유니크 조합
```

### 2.3 성격 시스템

```
[성격 타입 (6종)]
| ID | 성격 | 설명 | 행동 특성 |
|----|------|------|----------|
| 0 | 활발 | 에너지 넘침 | 뛰어다님, 빠른 반응 |
| 1 | 새침 | 도도함 | 느린 반응, 가끔 무시 |
| 2 | 겁쟁이 | 소심함 | 숨음, 움츠림 |
| 3 | 먹보 | 음식 좋아함 | 먹이에 빠른 반응 |
| 4 | 졸음이 | 자주 졸림 | 느린 행동, 자주 잠 |
| 5 | 장난꾸러기 | 말썽 | 아이템 숨김, 장난 |

[성격별 스탯 보정]
활발: 에너지 -10%/시간, 행복 +20% (놀이)
새침: 친밀도 상승 -20%, 행복 감소 -10%
겁쟁이: 신규 아이템에 행복 -10, 익숙해지면 +20
먹보: 체력 회복 +30%, 청결 -10%/시간
졸음이: 에너지 회복 +50%, 행복 상승 -10%
장난꾸러기: 랜덤 이벤트 +30%, 아이템 손실 확률
```

---

## 3. 육성 시스템 상세

### 3.1 기본 스탯 구조

```
[실시간 스탯 (0-100)]
❤️ 체력 (Health)
  - 감소: 시간당 -5 (기본)
  - 회복: 먹이 +20~50 (음식별)
  - 0 도달: 아픔 상태 → 병원 필요

😊 행복 (Happiness)
  - 감소: 시간당 -3 (기본)
  - 회복: 놀이 +15~40 (미니게임별)
  - 0 도달: 우울 상태 → 친밀도 감소

✨ 청결 (Cleanliness)
  - 감소: 시간당 -2, 먹이 후 -5
  - 회복: 목욕 +50
  - 0 도달: 병 걸림 확률 +20%

⚡ 에너지 (Energy)
  - 감소: 미니게임 -20, 상호작용 -5
  - 회복: 수면 시간당 +30
  - 0 도달: 행동 거부, 강제 수면
```

### 3.2 성장 스탯

```
[누적 스탯]
💪 힘 (Strength): 0-999
  - 획득: 달리기 미니게임 +1~5
  - 효과: 미니게임 난이도 보정

🧠 지능 (Intelligence): 0-999
  - 획득: 퍼즐 미니게임 +1~5
  - 효과: 대화 단어 학습 속도

💕 친밀도 (Affection): 0-999
  - 획득: 모든 상호작용 +1~3
  - 효과: 특수 반응 해금, 진화 조건

[레벨 시스템]
총 경험치 = 힘 + 지능 + 친밀도
레벨 = floor(총 경험치 / 100)
최대 레벨: 30
```

### 3.3 생애 주기

```
[성장 단계]
🥚 알 (1일)
  - 터치로 부화 촉진 (터치 100회 = -1시간)
  - 부화 시 DNA 확정

🐣 아기 (3일)
  - 스탯 감소 속도 x1.5
  - 미니게임 불가
  - 기본 먹이만 가능

🐱 청소년 (7일)
  - 모든 기능 해금
  - 성격 완전 발현
  - 성장 스탯 상승 x1.2

🐈 성체 (무한)
  - 기본 상태
  - 특수 진화 가능 조건
  
[특수 진화 조건]
힘 300+ → 운동선수 펫 (외형 변화)
지능 300+ → 천재 펫 (특수 대화)
친밀도 500+ → 영혼의 동반자 (레어 액션)
```

---

## 4. 상호작용 시스템 상세

### 4.1 기본 액션

```
[먹이주기]
UI: 음식 목록 → 드래그하여 펫에게 전달
물리: 음식이 펫 입으로 이동 → 먹는 애니메이션

[음식 종류]
| 음식 | 체력 | 행복 | 청결 | 가격 |
|------|-----|------|-----|------|
| 기본 사료 | +20 | +5 | -5 | 무료 |
| 고급 사료 | +35 | +10 | -5 | 50G |
| 간식 | +10 | +25 | -10 | 30G |
| 특별식 | +50 | +30 | -5 | 100G |
| 케이크 | +30 | +50 | -15 | 200G |

[놀아주기 - 미니게임]
1. 공 던지기
   - 조작: 스와이프로 공 던지기
   - 점수: 펫이 잡으면 +1, 연속 잡기 콤보
   - 보상: 행복 +15, 힘 +1~3

2. 줄다리기
   - 조작: 좌우 스와이프 연타
   - 승패: 플레이어 져야 행복 ++
   - 보상: 행복 +20, 힘 +2~4

3. 퍼즐 맞추기
   - 조작: 3x3 슬라이드 퍼즐
   - 난이도: 지능에 따라 조절
   - 보상: 행복 +25, 지능 +2~5

[목욕시키기]
- 조작: 펫을 문지르는 드래그
- 완료 조건: 때 게이지 0%
- 보상: 청결 +50, 친밀도 +5

[재우기]
- 조작: 조명 터치 → 끄기
- 수면 시간: 실시간 1시간 = 게임 6시간
- 보상: 에너지 +30/시간
```

### 4.2 AI 대화 시스템

```
[구현 방식]
프롬프트 템플릿 + 경량 LLM (로컬) 또는 서버 API

[프롬프트 구조]
"""
너는 {펫이름}이야. {종류}이고 성격은 {성격}이야.
현재 상태: 체력 {HP}%, 행복 {Happy}%, 배고픔 {Hunger}%
학습한 단어: {words}
말투: {성격별_말투}

유저 메시지: "{input}"
{펫이름}의 반응:
"""

[성격별 말투 예시]
활발: "와! 신난다~ {반응}!"
새침: "흥... {반응}... 뭐야."
겁쟁이: "으으... {반응}... 무서워..."
먹보: "{반응}... 근데 밥은?"
졸음이: "음... *하품* {반응}..."
장난꾸러기: "히히! {반응} 장난이야~"

[반응 시스템]
- 스탯 기반 반응 삽입
  - HP < 30: "배고파..." 추가
  - Happy < 30: "심심해..." 추가
  - 친밀도 > 500: 애칭 사용

[단어 학습]
- 자주 쓰는 단어 저장 (상위 20개)
- 대화 중 학습된 단어 랜덤 사용
- 예: "맛있어" 5회 이상 → 펫이 "맛있어" 사용
```

---

## 5. 소셜 시스템 상세

### 5.1 DNA 공유

```
[공유 방법]
1. 펫 프로필 → 공유 버튼
2. DNA 코드 복사 또는 QR 생성
3. SNS 공유 (이미지 + DNA 코드)

[공유 이미지 구성]
┌─────────────────────┐
│     [펫 이미지]      │
│                     │
│   "나의 펫: 뭉이"    │
│   DNA: A3F2-K9B1-X7C4│
│                     │
│   [AI 펫 시뮬레이터]  │
└─────────────────────┘
```

### 5.2 교배 시스템

```
[교배 공식]
자녀 DNA = 혼합(부모1 DNA, 부모2 DNA) + 돌연변이

[혼합 규칙]
- 각 자리별 50% 확률로 부/모 선택
- 12자리 각각 독립적 선택

[돌연변이]
- 기본 확률: 5%
- 돌연변이 시: 해당 자리 완전 랜덤

[교배 제한]
- 1일 3회 (광고 시청 시 +2회)
- 같은 DNA끼리 교배 불가
- 쿨다운: 교배 후 1시간

[결과]
- 새 알 생성 (부화까지 6시간)
- 부모 특성 조합 + 희귀 돌연변이 가능
```

### 5.3 랭킹 시스템

```
[랭킹 종류]
1. 귀여움 투표
   - 매주 리셋
   - 랜덤 펫 2마리 중 선택
   - 투표 수 기반 순위

2. 성장 랭킹
   - 총 스탯 합계 기준
   - 월간 집계

3. 친밀도 랭킹
   - 친밀도 수치 기준
   - 영구 랭킹

[보상]
Top 100: 프리미엄 음식 팩
Top 10: 레어 코스튬
Top 1: 전설 악세사리 + 칭호
```

---

## 6. UI/UX 설계

### 6.1 메인 화면

```
┌─────────────────────────────────────┐
│  💰 12,500   💎 150   🐾 친밀도 456  │
├─────────────────────────────────────┤
│                                     │
│         [펫 3D/2D 뷰]               │
│         (터치로 상호작용)            │
│         (핀치로 줌)                 │
│                                     │
├─────────────────────────────────────┤
│  ❤️ ████████░░ 80%                  │
│  😊 ██████░░░░ 60%                  │
│  ✨ █████░░░░░ 50%                  │
│  ⚡ ███░░░░░░░ 30%                  │
├─────────────────────────────────────┤
│  [🍖먹이] [🎾놀이] [🛁목욕] [💬대화] │
├─────────────────────────────────────┤
│  [도감] [상점] [교배] [랭킹] [설정]  │
└─────────────────────────────────────┘
```

### 6.2 대화 화면

```
┌─────────────────────────────────────┐
│  ← 뒤로                             │
├─────────────────────────────────────┤
│                                     │
│      [펫 표정 클로즈업]              │
│                                     │
├─────────────────────────────────────┤
│  ┌─────────────────────────────┐   │
│  │ 오늘 기분 어때?              │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ *꼬리 흔들며* 주인이랑 같이   │   │
│  │ 있어서 좋아! 오늘 간식 줄거야?│   │
│  └─────────────────────────────┘   │
│                                     │
├─────────────────────────────────────┤
│  [텍스트 입력창]          [전송 📤] │
└─────────────────────────────────────┘
```

### 6.3 코스튬 화면

```
┌─────────────────────────────────────┐
│  ← 뒤로           코스튬            │
├─────────────────────────────────────┤
│                                     │
│         [펫 + 현재 코스튬]          │
│         (좌우 스와이프 회전)         │
│                                     │
├─────────────────────────────────────┤
│  [머리] [목] [등] [꼬리] [신발]     │
├─────────────────────────────────────┤
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐      │
│  │ 🎀 │ │ 🎩 │ │ 👑 │ │ 🧢 │      │
│  │무료│ │100G│ │💎50│ │50G │      │
│  └────┘ └────┘ └────┘ └────┘      │
│  (스크롤 가능)                      │
└─────────────────────────────────────┘
```

---

## 7. 밸런싱 수치

### 7.1 스탯 감소/회복 밸런스

```
[시간당 감소 (기본)]
체력: -5/시간
행복: -3/시간
청결: -2/시간 (먹이 후 추가 -5)
에너지: 활동 시 -5/30분

[회복 효율]
| 액션 | 체력 | 행복 | 청결 | 에너지 | 친밀도 |
|------|-----|-----|------|-------|-------|
| 기본사료 | +20 | +5 | -5 | - | +1 |
| 고급사료 | +35 | +10 | -5 | - | +2 |
| 공놀이 | - | +15 | - | -20 | +2 |
| 퍼즐 | - | +25 | - | -15 | +3 |
| 목욕 | - | +10 | +50 | -10 | +5 |
| 수면 | - | - | - | +30/h | - |
| 대화 | - | +5 | - | -5 | +3 |

[이상적 관리 사이클]
4시간마다 체크: 먹이 1회, 놀이 1회
8시간마다: 목욕 1회
취침 시: 재우기
= 하루 3-4회 접속으로 건강 유지
```

### 7.2 경제 밸런싱

```
[재화 획득]
- 일일 로그인: 100G + 5💎
- 미니게임 (1회): 20-50G
- 광고 시청: 50G 또는 10💎
- 랭킹 보상: 100-1000G/주

[재화 소비]
| 항목 | 골드 | 젬 |
|------|-----|-----|
| 기본 사료 | 무료 | - |
| 고급 사료 | 50 | - |
| 코스튬 (일반) | 100-300 | - |
| 코스튬 (레어) | - | 50-100 |
| 추가 펫 슬롯 | - | 200 |
| 알 부화 즉시 | - | 50 |

[F2P 진행 예상]
1일차: 골드 100, 젬 5 (로그인)
1주차: 골드 2,000, 젬 50 (로그인+미니게임)
1달차: 골드 10,000, 젬 200+
```

### 7.3 성장 속도

```
[스탯 성장 예상]
| 활동 | 힘 | 지능 | 친밀도 |
|------|---|------|-------|
| 미니게임 1회 | +1~5 | +1~5 | +2 |
| 먹이 1회 | - | - | +1~2 |
| 대화 1회 | - | +1 | +3 |
| 목욕 1회 | - | - | +5 |

[레벨업 예상 시간]
Lv 1→5: 1-2일 (친숙해지기)
Lv 5→10: 1주일 (일반 플레이)
Lv 10→20: 2-3주 (꾸준한 관리)
Lv 20→30: 1-2달 (고인물 영역)

[진화 조건 달성]
힘 300: ~2주 (미니게임 집중)
지능 300: ~2주 (퍼즐 집중)
친밀도 500: ~3-4주 (종합 관리)
```

---

## 8. 기술 구현 사항

### 8.1 프로시저럴 펫 생성

```csharp
[ScriptableObject 구조]
PetDNA.cs
├── string dnaCode (12자리)
├── PetType type
├── BodyPartSet bodyParts
├── ColorSet colors
├── PersonalityType personality
└── int uniqueSeed

[생성 시스템]
public class PetGenerator {
    public PetData Generate(string dnaCode) {
        var seed = ParseDNA(dnaCode);
        
        PetData pet = new PetData();
        pet.type = GetPetType(seed.typeCode);
        pet.body = bodyPartDB.Get(seed.bodyCode);
        pet.ears = earPartDB.Get(seed.earCode);
        pet.tail = tailPartDB.Get(seed.tailCode);
        pet.mainColor = ColorFromHex(seed.colorCode);
        pet.pattern = patternDB.Get(seed.patternCode);
        pet.personality = (PersonalityType)seed.personalityCode;
        
        return pet;
    }
}

[모델 조합]
// 런타임 메시 결합 또는 Skinned Mesh 스왑
// 저사양 기기: 2D 스프라이트 조합 모드 지원
```

### 8.2 AI 대화 시스템

```csharp
[로컬 LLM 연동 - LLM for Unity]
public class PetChatSystem {
    private LLMCharacter llmCharacter;
    
    public async Task<string> Chat(string userMessage) {
        string systemPrompt = BuildPrompt(currentPet);
        string response = await llmCharacter.Chat(
            systemPrompt + userMessage
        );
        
        // 감정 파싱 및 애니메이션 트리거
        EmotionType emotion = ParseEmotion(response);
        petAnimator.PlayEmotion(emotion);
        
        // 단어 학습
        learnedWords.Add(ExtractKeywords(userMessage));
        
        return response;
    }
    
    private string BuildPrompt(PetData pet) {
        return $@"너는 {pet.name}이야. 
        종류: {pet.type}, 성격: {pet.personality}
        현재 체력: {pet.stats.hp}%
        현재 행복: {pet.stats.happiness}%
        학습한 단어: {string.Join(", ", learnedWords)}
        {GetPersonalityPrompt(pet.personality)}";
    }
}

[서버 API 대안 - OpenAI/Gemini]
// LLM for Unity 무료 버전 사용
// 또는 AI Toolbox로 서버 연동
// API 호출 비용: ~$0.002/대화
```

### 8.3 오프라인 시뮬레이션

```csharp
[오프라인 스탯 계산]
public class OfflineSimulator {
    public void CalculateOfflineChanges() {
        float offlineHours = GetOfflineTime();
        
        // 스탯 감소 계산
        pet.hp -= Mathf.Min(pet.hp, 5f * offlineHours);
        pet.happiness -= Mathf.Min(pet.happiness, 3f * offlineHours);
        pet.cleanliness -= Mathf.Min(pet.cleanliness, 2f * offlineHours);
        
        // 수면 중이었다면 에너지 회복
        if (wasInSleepMode) {
            pet.energy += Mathf.Min(100 - pet.energy, 30f * offlineHours);
        }
        
        // 상태 체크
        if (pet.hp <= 0) TriggerSickState();
        if (pet.happiness <= 0) TriggerDepressedState();
    }
}
```

### 8.4 푸시 알림 시스템

```csharp
[알림 트리거]
public class NotificationManager {
    public void ScheduleNotifications() {
        // 배고픔 예상 시간 계산
        float hoursUntilHungry = pet.hp / 5f;
        ScheduleNotification(
            "배고파요!",
            $"{pet.name}이(가) 배가 고프대요! 밥 주러 오세요~",
            hoursUntilHungry
        );
        
        // 외로움 알림
        if (lastInteraction > 4 hours) {
            SendNotification("보고 싶어요...", 
                $"{pet.name}이(가) 주인을 기다리고 있어요");
        }
    }
}
```

### 8.5 교배 시스템 구현

```csharp
[DNA 믹싱]
public class BreedingSystem {
    public string BreedDNA(string dna1, string dna2) {
        char[] childDNA = new char[12];
        
        for (int i = 0; i < 12; i++) {
            // 돌연변이 체크 (5%)
            if (Random.value < 0.05f) {
                childDNA[i] = GetRandomDNAChar();
            }
            // 부모 중 랜덤 선택
            else {
                childDNA[i] = Random.value < 0.5f 
                    ? dna1[i] : dna2[i];
            }
        }
        
        return FormatDNA(childDNA);
    }
}
```

---

## 9. 개발 우선순위

### MVP (5주)
1. 펫 생성 시스템 (DNA 기반)
2. 기본 스탯 관리 (먹이, 놀이, 목욕)
3. 미니게임 2종
4. 기본 UI
5. 로컬 저장

### Phase 2 (4주)
1. AI 대화 시스템 (로컬 LLM)
2. 성장/진화 시스템
3. 코스튬 시스템
4. 푸시 알림

### Phase 3 (3주)
1. 소셜 기능 (DNA 공유)
2. 교배 시스템
3. 랭킹
4. 광고/IAP 연동

---

*작성일: 2026-01-27 | 버전: 1.0*
