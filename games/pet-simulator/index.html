<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ğŸ¾ AI í« ì‹œë®¬ë ˆì´í„°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
            touch-action: manipulation;
        }
        
        .game-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 24px;
            padding: 20px;
            max-width: 400px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        .header {
            text-align: center;
            margin-bottom: 15px;
        }
        
        .header h1 {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 5px;
        }
        
        .level-info {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            font-size: 0.9em;
            color: #666;
        }
        
        .level-badge {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
        }
        
        .exp-bar {
            width: 120px;
            height: 12px;
            background: #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .exp-fill {
            height: 100%;
            background: linear-gradient(90deg, #f093fb, #f5576c);
            transition: width 0.3s ease;
        }
        
        .pet-area {
            position: relative;
            width: 100%;
            height: 200px;
            background: linear-gradient(180deg, #87CEEB 0%, #98FB98 100%);
            border-radius: 20px;
            margin-bottom: 15px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .pet-display {
            text-align: center;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .pet-emoji {
            font-size: 80px;
            display: block;
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.2));
        }
        
        .pet-name {
            margin-top: 10px;
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            text-shadow: 0 2px 4px rgba(255,255,255,0.8);
        }
        
        .mood-bubble {
            position: absolute;
            top: 10px;
            right: 15px;
            background: white;
            padding: 8px 12px;
            border-radius: 15px;
            font-size: 1.5em;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .stat-item {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 12px;
            text-align: center;
        }
        
        .stat-icon {
            font-size: 1.5em;
            margin-bottom: 5px;
        }
        
        .stat-name {
            font-size: 0.8em;
            color: #666;
            margin-bottom: 5px;
        }
        
        .stat-bar {
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .stat-fill {
            height: 100%;
            transition: width 0.3s ease, background 0.3s ease;
            border-radius: 5px;
        }
        
        .stat-fill.hunger { background: linear-gradient(90deg, #ff6b6b, #ffa502); }
        .stat-fill.happiness { background: linear-gradient(90deg, #ffd93d, #ff6b6b); }
        .stat-fill.energy { background: linear-gradient(90deg, #6bcb77, #4a90a4); }
        .stat-fill.cleanliness { background: linear-gradient(90deg, #4fc3f7, #7c4dff); }
        
        .stat-fill.low { background: linear-gradient(90deg, #ff4444, #cc0000) !important; }
        
        .buttons-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .action-btn {
            padding: 15px;
            border: none;
            border-radius: 15px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            font-weight: bold;
            color: white;
        }
        
        .action-btn:active {
            transform: scale(0.95);
        }
        
        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .btn-feed { background: linear-gradient(135deg, #ff6b6b 0%, #ffa502 100%); }
        .btn-play { background: linear-gradient(135deg, #ffd93d 0%, #ff6b6b 100%); }
        .btn-sleep { background: linear-gradient(135deg, #6bcb77 0%, #4a90a4 100%); }
        .btn-clean { background: linear-gradient(135deg, #4fc3f7 0%, #7c4dff 100%); }
        
        .btn-icon {
            font-size: 1.8em;
        }
        
        .message-area {
            margin-top: 15px;
            padding: 10px;
            background: #f0f0f0;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9em;
            color: #555;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .sleeping-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 50, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 20px;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }
        
        .sleeping-overlay.active {
            opacity: 1;
        }
        
        .zzz {
            font-size: 3em;
            color: white;
            animation: zzz 1.5s ease-in-out infinite;
        }
        
        @keyframes zzz {
            0%, 100% { opacity: 0.5; transform: translateY(0); }
            50% { opacity: 1; transform: translateY(-10px); }
        }
        
        .particles {
            position: absolute;
            pointer-events: none;
        }
        
        .particle {
            position: absolute;
            font-size: 1.5em;
            animation: particle-float 1s ease-out forwards;
        }
        
        @keyframes particle-float {
            0% { opacity: 1; transform: translateY(0) scale(1); }
            100% { opacity: 0; transform: translateY(-50px) scale(0.5); }
        }
        
        .level-up-animation {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 30px 50px;
            border-radius: 20px;
            font-size: 1.5em;
            font-weight: bold;
            z-index: 1000;
            animation: level-up 2s ease-out forwards;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }
        
        @keyframes level-up {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            20% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
            40% { transform: translate(-50%, -50%) scale(1); }
            80% { opacity: 1; }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(1); }
        }
        
        .death-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            color: white;
            text-align: center;
            padding: 20px;
        }
        
        .death-screen h2 {
            font-size: 2em;
            margin-bottom: 20px;
        }
        
        .death-screen p {
            font-size: 1.2em;
            margin-bottom: 30px;
            color: #aaa;
        }
        
        .restart-btn {
            padding: 15px 40px;
            font-size: 1.2em;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .restart-btn:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>ğŸ¾ AI í« ì‹œë®¬ë ˆì´í„°</h1>
            <div class="level-info">
                <span class="level-badge">Lv. <span id="level">1</span></span>
                <div class="exp-bar">
                    <div class="exp-fill" id="expBar" style="width: 0%"></div>
                </div>
                <span id="expText">0/100</span>
            </div>
        </div>
        
        <div class="pet-area" id="petArea">
            <div class="pet-display">
                <span class="pet-emoji" id="petEmoji">ğŸ±</span>
                <div class="pet-name" id="petName">ëƒ¥ì´</div>
            </div>
            <div class="mood-bubble" id="moodBubble">ğŸ˜Š</div>
            <div class="sleeping-overlay" id="sleepingOverlay">
                <span class="zzz">ğŸ’¤ Zzz...</span>
            </div>
            <div class="particles" id="particles"></div>
        </div>
        
        <div class="stats-container">
            <div class="stat-item">
                <div class="stat-icon">ğŸ–</div>
                <div class="stat-name">ë°°ê³ í””</div>
                <div class="stat-bar">
                    <div class="stat-fill hunger" id="hungerBar" style="width: 80%"></div>
                </div>
            </div>
            <div class="stat-item">
                <div class="stat-icon">ğŸ’–</div>
                <div class="stat-name">í–‰ë³µë„</div>
                <div class="stat-bar">
                    <div class="stat-fill happiness" id="happinessBar" style="width: 80%"></div>
                </div>
            </div>
            <div class="stat-item">
                <div class="stat-icon">âš¡</div>
                <div class="stat-name">ì—ë„ˆì§€</div>
                <div class="stat-bar">
                    <div class="stat-fill energy" id="energyBar" style="width: 80%"></div>
                </div>
            </div>
            <div class="stat-item">
                <div class="stat-icon">âœ¨</div>
                <div class="stat-name">ì²­ê²°ë„</div>
                <div class="stat-bar">
                    <div class="stat-fill cleanliness" id="cleanlinessBar" style="width: 80%"></div>
                </div>
            </div>
        </div>
        
        <div class="buttons-container">
            <button class="action-btn btn-feed" id="feedBtn" onclick="feed()">
                <span class="btn-icon">ğŸ–</span>
                <span>ë¨¹ì´ì£¼ê¸°</span>
            </button>
            <button class="action-btn btn-play" id="playBtn" onclick="play()">
                <span class="btn-icon">ğŸ¾</span>
                <span>ë†€ì•„ì£¼ê¸°</span>
            </button>
            <button class="action-btn btn-sleep" id="sleepBtn" onclick="sleep()">
                <span class="btn-icon">ğŸ˜´</span>
                <span>ì¬ìš°ê¸°</span>
            </button>
            <button class="action-btn btn-clean" id="cleanBtn" onclick="clean()">
                <span class="btn-icon">ğŸ›</span>
                <span>ì”»ê¸°ê¸°</span>
            </button>
        </div>
        
        <div class="message-area" id="messageArea">
            ëƒ¥ì´ê°€ ë‹¹ì‹ ì„ ë°˜ê°‘ê²Œ ë§ì´í•´ìš”! ğŸ±
        </div>
    </div>
    
    <div class="death-screen" id="deathScreen" style="display: none;">
        <h2>ğŸ˜¢ í«ì´ ë– ë‚¬ì–´ìš”...</h2>
        <p>í«ì˜ ìƒíƒœë¥¼ ì˜ ê´€ë¦¬í•´ì£¼ì„¸ìš”</p>
        <button class="restart-btn" onclick="restartGame()">ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</button>
    </div>

    <script>
        // ê²Œì„ ìƒíƒœ
        const gameState = {
            hunger: 80,
            happiness: 80,
            energy: 80,
            cleanliness: 80,
            level: 1,
            exp: 0,
            expToLevel: 100,
            isSleeping: false,
            isAlive: true,
            petType: 'ğŸ±',
            petName: 'ëƒ¥ì´'
        };
        
        // í« ì¢…ë¥˜ (ë ˆë²¨ì— ë”°ë¼ ì§„í™”)
        const petEvolutions = [
            { emoji: 'ğŸ±', name: 'ëƒ¥ì´' },
            { emoji: 'ğŸˆ', name: 'ê³ ì–‘ì´' },
            { emoji: 'ğŸ¦', name: 'ì‚¬ìëƒ¥ì´' },
            { emoji: 'ğŸ¯', name: 'í˜¸ë­ì´' },
            { emoji: 'ğŸ¦„', name: 'ìœ ë‹ˆì½˜' }
        ];
        
        // ê°ì • ì´ëª¨ì§€
        const moodEmojis = {
            happy: 'ğŸ˜Š',
            veryHappy: 'ğŸ¥°',
            sad: 'ğŸ˜¢',
            hungry: 'ğŸ¤¤',
            tired: 'ğŸ˜´',
            dirty: 'ğŸ¤¢',
            sick: 'ğŸ˜µ',
            excited: 'ğŸ¤©'
        };
        
        // DOM ìš”ì†Œ
        const elements = {
            petEmoji: document.getElementById('petEmoji'),
            petName: document.getElementById('petName'),
            moodBubble: document.getElementById('moodBubble'),
            hungerBar: document.getElementById('hungerBar'),
            happinessBar: document.getElementById('happinessBar'),
            energyBar: document.getElementById('energyBar'),
            cleanlinessBar: document.getElementById('cleanlinessBar'),
            level: document.getElementById('level'),
            expBar: document.getElementById('expBar'),
            expText: document.getElementById('expText'),
            messageArea: document.getElementById('messageArea'),
            sleepingOverlay: document.getElementById('sleepingOverlay'),
            particles: document.getElementById('particles'),
            deathScreen: document.getElementById('deathScreen'),
            feedBtn: document.getElementById('feedBtn'),
            playBtn: document.getElementById('playBtn'),
            sleepBtn: document.getElementById('sleepBtn'),
            cleanBtn: document.getElementById('cleanBtn')
        };
        
        // ë©”ì‹œì§€ ëª©ë¡
        const messages = {
            feed: [
                'ëƒ ëƒ ! ë§›ìˆì–´ìš”! ğŸ–',
                'ë°°ë¶€ë¥´ë‹¤ ëƒ¥~ ğŸ˜‹',
                'ë” ì£¼ì„¸ìš”! ğŸ™€',
                'ìµœê³ ì˜ ë°¥ì´ì—ìš”! â­'
            ],
            play: [
                'ì‹ ë‚œë‹¤ ëƒ¥! ğŸ¾',
                'ë” ë†€ì•„ì¤˜ìš”! ğŸ¤ª',
                'ì•¼í˜¸! ì¬ë°Œì–´! ğŸ‰',
                'ìµœê³ ì˜ ì‹œê°„! ğŸ’•'
            ],
            sleep: [
                'ì˜ ììš”... ğŸ’¤',
                'ê¿ˆë‚˜ë¼ë¡œ ê°ˆê²Œìš”~ ğŸŒ™',
                'Zzz... ğŸ˜´',
                'í¬ê·¼í•´ìš”... â˜ï¸'
            ],
            clean: [
                'ê¹¨ë—í•´ì¡Œì–´ìš”! âœ¨',
                'ìƒì¾Œí•˜ë‹¤ ëƒ¥! ğŸ›',
                'ë°˜ì§ë°˜ì§! ğŸ’',
                'ê¸°ë¶„ ì¢‹ì•„ìš”! ğŸŒŸ'
            ],
            wakeUp: [
                'ì˜ ì¤ì–´ìš”! ê¸°ìš´ì´ ë„˜ì³ìš”! âš¡',
                'ì¢‹ì€ ì•„ì¹¨ì´ì—ìš”! â˜€ï¸',
                'ì—ë„ˆì§€ ì¶©ì „ ì™„ë£Œ! ğŸ”‹'
            ],
            warning: {
                hunger: 'ë°°ê³ íŒŒìš”... ë°¥ ì£¼ì„¸ìš”! ğŸ˜¿',
                happiness: 'ì™¸ë¡œì›Œìš”... ë†€ì•„ì£¼ì„¸ìš”! ğŸ˜¢',
                energy: 'ë„ˆë¬´ í”¼ê³¤í•´ìš”... ì¬ì›Œì£¼ì„¸ìš”! ğŸ˜©',
                cleanliness: 'ì”»ê³  ì‹¶ì–´ìš”... ğŸ¤¢'
            }
        };
        
        // íŒŒí‹°í´ íš¨ê³¼
        function createParticles(emoji, count = 5) {
            for (let i = 0; i < count; i++) {
                const particle = document.createElement('span');
                particle.className = 'particle';
                particle.textContent = emoji;
                particle.style.left = `${Math.random() * 80 + 10}%`;
                particle.style.top = `${Math.random() * 40 + 30}%`;
                elements.particles.appendChild(particle);
                
                setTimeout(() => particle.remove(), 1000);
            }
        }
        
        // ë ˆë²¨ì—… ì• ë‹ˆë©”ì´ì…˜
        function showLevelUp() {
            const levelUp = document.createElement('div');
            levelUp.className = 'level-up-animation';
            levelUp.innerHTML = `ğŸ‰ ë ˆë²¨ ì—…! Lv.${gameState.level} ğŸ‰`;
            document.body.appendChild(levelUp);
            
            setTimeout(() => levelUp.remove(), 2000);
        }
        
        // ë©”ì‹œì§€ í‘œì‹œ
        function showMessage(category) {
            const msgList = messages[category];
            const msg = msgList[Math.floor(Math.random() * msgList.length)];
            elements.messageArea.textContent = msg;
        }
        
        // ê²½ê³  ë©”ì‹œì§€
        function showWarning(type) {
            elements.messageArea.textContent = messages.warning[type];
        }
        
        // ê²½í—˜ì¹˜ íšë“
        function gainExp(amount) {
            gameState.exp += amount;
            
            while (gameState.exp >= gameState.expToLevel) {
                gameState.exp -= gameState.expToLevel;
                gameState.level++;
                gameState.expToLevel = Math.floor(gameState.expToLevel * 1.5);
                
                // ì§„í™” ì²´í¬
                const evolutionIndex = Math.min(gameState.level - 1, petEvolutions.length - 1);
                const evolution = petEvolutions[evolutionIndex];
                gameState.petType = evolution.emoji;
                gameState.petName = evolution.name;
                
                showLevelUp();
                createParticles('â­', 10);
            }
            
            updateUI();
        }
        
        // ë¨¹ì´ì£¼ê¸°
        function feed() {
            if (gameState.isSleeping || !gameState.isAlive) return;
            
            gameState.hunger = Math.min(100, gameState.hunger + 25);
            gameState.cleanliness = Math.max(0, gameState.cleanliness - 5);
            gainExp(10);
            createParticles('ğŸ–', 5);
            showMessage('feed');
            updateUI();
        }
        
        // ë†€ì•„ì£¼ê¸°
        function play() {
            if (gameState.isSleeping || !gameState.isAlive) return;
            if (gameState.energy < 20) {
                elements.messageArea.textContent = 'ë„ˆë¬´ í”¼ê³¤í•´ì„œ ë†€ ìˆ˜ ì—†ì–´ìš”... ğŸ˜©';
                return;
            }
            
            gameState.happiness = Math.min(100, gameState.happiness + 25);
            gameState.energy = Math.max(0, gameState.energy - 15);
            gameState.hunger = Math.max(0, gameState.hunger - 10);
            gainExp(15);
            createParticles('ğŸ¾', 5);
            showMessage('play');
            updateUI();
        }
        
        // ì¬ìš°ê¸°
        function sleep() {
            if (!gameState.isAlive) return;
            
            if (gameState.isSleeping) {
                // ê¹¨ìš°ê¸°
                gameState.isSleeping = false;
                elements.sleepingOverlay.classList.remove('active');
                showMessage('wakeUp');
                elements.sleepBtn.innerHTML = '<span class="btn-icon">ğŸ˜´</span><span>ì¬ìš°ê¸°</span>';
            } else {
                // ì¬ìš°ê¸°
                gameState.isSleeping = true;
                elements.sleepingOverlay.classList.add('active');
                showMessage('sleep');
                elements.sleepBtn.innerHTML = '<span class="btn-icon">â˜€ï¸</span><span>ê¹¨ìš°ê¸°</span>';
            }
            updateUI();
        }
        
        // ì”»ê¸°ê¸°
        function clean() {
            if (gameState.isSleeping || !gameState.isAlive) return;
            
            gameState.cleanliness = Math.min(100, gameState.cleanliness + 30);
            gameState.happiness = Math.min(100, gameState.happiness + 10);
            gainExp(10);
            createParticles('âœ¨', 5);
            showMessage('clean');
            updateUI();
        }
        
        // ê°ì • ì—…ë°ì´íŠ¸
        function updateMood() {
            const avg = (gameState.hunger + gameState.happiness + gameState.energy + gameState.cleanliness) / 4;
            
            let mood;
            if (gameState.isSleeping) {
                mood = moodEmojis.tired;
            } else if (avg >= 80) {
                mood = moodEmojis.veryHappy;
            } else if (avg >= 60) {
                mood = moodEmojis.happy;
            } else if (gameState.hunger < 30) {
                mood = moodEmojis.hungry;
            } else if (gameState.cleanliness < 30) {
                mood = moodEmojis.dirty;
            } else if (gameState.energy < 30) {
                mood = moodEmojis.tired;
            } else if (avg < 30) {
                mood = moodEmojis.sick;
            } else {
                mood = moodEmojis.sad;
            }
            
            elements.moodBubble.textContent = mood;
        }
        
        // UI ì—…ë°ì´íŠ¸
        function updateUI() {
            elements.petEmoji.textContent = gameState.petType;
            elements.petName.textContent = gameState.petName;
            
            // ìŠ¤íƒ¯ ë°” ì—…ë°ì´íŠ¸
            updateStatBar(elements.hungerBar, gameState.hunger);
            updateStatBar(elements.happinessBar, gameState.happiness);
            updateStatBar(elements.energyBar, gameState.energy);
            updateStatBar(elements.cleanlinessBar, gameState.cleanliness);
            
            // ë ˆë²¨ & ê²½í—˜ì¹˜
            elements.level.textContent = gameState.level;
            elements.expBar.style.width = `${(gameState.exp / gameState.expToLevel) * 100}%`;
            elements.expText.textContent = `${gameState.exp}/${gameState.expToLevel}`;
            
            // ê°ì • ì—…ë°ì´íŠ¸
            updateMood();
            
            // ë²„íŠ¼ ìƒíƒœ
            const disabled = gameState.isSleeping;
            elements.feedBtn.disabled = disabled;
            elements.playBtn.disabled = disabled;
            elements.cleanBtn.disabled = disabled;
        }
        
        function updateStatBar(bar, value) {
            bar.style.width = `${value}%`;
            if (value < 30) {
                bar.classList.add('low');
            } else {
                bar.classList.remove('low');
            }
        }
        
        // ì‹œê°„ ê²½ê³¼ (ìŠ¤íƒ¯ ê°ì†Œ)
        function tick() {
            if (!gameState.isAlive) return;
            
            if (gameState.isSleeping) {
                // ìˆ˜ë©´ ì¤‘ ì—ë„ˆì§€ íšŒë³µ
                gameState.energy = Math.min(100, gameState.energy + 5);
                if (gameState.energy >= 100) {
                    sleep(); // ìë™ìœ¼ë¡œ ê¹¨ìš°ê¸°
                }
            } else {
                // ì¼ë°˜ ìƒíƒœ - ìŠ¤íƒ¯ ê°ì†Œ
                gameState.hunger = Math.max(0, gameState.hunger - 2);
                gameState.happiness = Math.max(0, gameState.happiness - 1);
                gameState.energy = Math.max(0, gameState.energy - 1);
                gameState.cleanliness = Math.max(0, gameState.cleanliness - 1);
            }
            
            // ê²½ê³  ë©”ì‹œì§€
            if (gameState.hunger < 20 && !gameState.isSleeping) {
                showWarning('hunger');
            } else if (gameState.happiness < 20 && !gameState.isSleeping) {
                showWarning('happiness');
            } else if (gameState.energy < 20 && !gameState.isSleeping) {
                showWarning('energy');
            } else if (gameState.cleanliness < 20 && !gameState.isSleeping) {
                showWarning('cleanliness');
            }
            
            // ì‚¬ë§ ì²´í¬
            if (gameState.hunger <= 0 || gameState.happiness <= 0 || 
                gameState.energy <= 0 || gameState.cleanliness <= 0) {
                gameOver();
            }
            
            updateUI();
        }
        
        // ê²Œì„ ì˜¤ë²„
        function gameOver() {
            gameState.isAlive = false;
            stopGameLoop();
            saveGame();
            elements.deathScreen.style.display = 'flex';
        }
        
        // ê²Œì„ ì¬ì‹œì‘
        function restartGame() {
            gameState.hunger = 80;
            gameState.happiness = 80;
            gameState.energy = 80;
            gameState.cleanliness = 80;
            gameState.level = 1;
            gameState.exp = 0;
            gameState.expToLevel = 100;
            gameState.isSleeping = false;
            gameState.isAlive = true;
            gameState.petType = petEvolutions[0].emoji;
            gameState.petName = petEvolutions[0].name;
            
            elements.deathScreen.style.display = 'none';
            elements.sleepingOverlay.classList.remove('active');
            elements.sleepBtn.innerHTML = '<span class="btn-icon">ğŸ˜´</span><span>ì¬ìš°ê¸°</span>';
            elements.messageArea.textContent = `${gameState.petName}ê°€ ë‹¹ì‹ ì„ ë°˜ê°‘ê²Œ ë§ì´í•´ìš”! ${gameState.petType}`;
            
            updateUI();
            saveGame();
            startGameLoop();
        }
        
        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°
        function saveGame() {
            localStorage.setItem('petSimulator', JSON.stringify(gameState));
        }
        
        function loadGame() {
            const saved = localStorage.getItem('petSimulator');
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    Object.assign(gameState, data);
                    
                    if (gameState.isSleeping) {
                        elements.sleepingOverlay.classList.add('active');
                        elements.sleepBtn.innerHTML = '<span class="btn-icon">â˜€ï¸</span><span>ê¹¨ìš°ê¸°</span>';
                    }
                    
                    if (!gameState.isAlive) {
                        elements.deathScreen.style.display = 'flex';
                    }
                } catch (e) {
                    console.warn('ì €ì¥ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨, ìƒˆ ê²Œì„ ì‹œì‘:', e);
                    localStorage.removeItem('petSimulator');
                }
            }
            updateUI();
        }
        
        // ê²Œì„ ë£¨í”„ ID (ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€)
        let gameLoopId = null;
        
        // ê²Œì„ ë£¨í”„ ì‹œì‘
        function startGameLoop() {
            if (gameLoopId) clearInterval(gameLoopId);
            gameLoopId = setInterval(() => {
                tick();
                if (gameState.isAlive) {
                    saveGame();
                }
            }, 3000);
        }
        
        // ê²Œì„ ë£¨í”„ ì •ì§€
        function stopGameLoop() {
            if (gameLoopId) {
                clearInterval(gameLoopId);
                gameLoopId = null;
            }
        }
        
        // ì´ˆê¸°í™”
        loadGame();
        if (gameState.isAlive) {
            startGameLoop();
        }
    </script>
</body>
</html>
